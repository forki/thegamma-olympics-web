<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8" >
  <meta name=viewport content="width=device-width, initial-scale=1">

  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
	<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet"
	  integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
	<link href="lib/chosen.min.css" rel="stylesheet">
  <link href="custom/style.css" rel="stylesheet">
	
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<meta name="theme-color" content="#F4C300">	
</head>
<body>

  <header>
    <div class="container">
      <div class="content">
        <h1><span>Experiments in Tooling for Data-Driven Storytelling</span></h1>
      </div>
    </div>
  </header>

  <nav class="navbar" style="display:none">
    <div class="container">
      <div class="navbar-header">
       <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#nb" aria-expanded="false">
         <span class="sr-only">Toggle navigation</span>
         <span class="icon-bar"></span>
         <span class="icon-bar"></span>
         <span class="icon-bar"></span>
       </button>
      </div>
      <div class="collapse navbar-collapse" id="nb">
       <ul class="nav navbar-nav">
         <li class="selected"><a href="#athletes">Athletes</a></li>
         <li><a href="#countries">Countries</a></li>
				 <li><a href="#fun">Fun facts</a></li>
       </ul>
       <ul class="nav navbar-nav navbar-right">
				 <li><a href="#about">About</a></li>
       </ul>
      </div>
    </div>
  </nav>

  <article>
		<div class="container">
			<div class="col-lg-2 new-content">
        <p>Tomas Petricek</p>
        <p><a href="http://twitter.com/tomaspetricek">@tomaspetricek</a> | <a href="mailto:tomas@tomasp.net">tomas@tomasp.net</a></p>
        <strong>Share</strong><br />
        <i class="fa fa-twitter-square"></i>
        <i class="fa fa-facebook-official"></i>
        <i class="fa fa-envelope"></i>
      </div>
			<div class="col-lg-10 new-content">
				<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
				<style>

				.ia-editor-panel h3, .ia-editor h3 {
					font-family:'PT Sans',verdana,sans-serif;
					font-size:12pt;
					font-weight:bold;
					color:#909090;
					margin:0px;
				}
				.ia-editor-panel p, .ia-editor p {
					font-size:11pt;
					color:#808080;
					margin:0px 0px 20px 0px;
				}				
				.ia-editor-panel, .ia-editor {
					margin:0px auto 40px auto;
					padding:0px 20px 0px 20px;
				}
				
				.ia-editor-panel .chosen-container {
          width:100% !important;
          line-height:16px;
        }
        .ia-editor-panel .chosen-results li {
          padding:2px 10px 2px 10px !important;
        }
				.ia-editor-panel .control {
					max-width:600px;
          margin:0px auto 20px auto;
        }

				.ed-nested .chosen-container {
					margin-bottom:5px;
				}

        /* editors */
        .ed-list ul, .ed-list li {
          margin:0px;
          padding:0px;
          list-style-type:none;
          font-size:14px;
        }
        .ed-list li {
          padding:2px 10px 2px 10px;
        }
        .ed-list button {
          text-align:right;
          border-style:none;
          background:transparent;
          height:10px;
          float:right;
          font-weight:bold;
          font-size:8pt;
          color:#808080;
        }
        .ed-list button:disabled {
          color:#a0a0a0;
        }
        .ed-list .control {
          border: 1px solid #ccc;
          padding-top:2px;
          -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
          box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
        }
        .ed-list .chosen-single span {
					line-height:16px;
          color:#c0c0c0;
        }
        .ed-list .chosen-single div {
          right:8px !important;
          top:-10px !important;
        }
        .ed-list .chosen-drop {
          border-top-style:none !important;
        }
        .ed-list .chosen-single {
          width:100% !important;
          box-shadow:none !important;
          border-style:none !important;
          padding:0px 10px 0px 10px !important;
          height:20px !important;
        }


				.ed-nested {

				}
				</style>
				<script>

				function startSpinning(el)
				{
				  var counter = 0;
				  var finished = false;
				  function spin() {
				    if (finished) {
				      el.style.display = "none";
				      return;
				    } else {
				      el.style.display = "block";
				      var offset = counter * -21;
				      el.style.backgroundPosition = "0px " + offset + "px";
				      counter++; if (counter >= 19) counter = 0;
				      setTimeout(spin, 100);
				    }
				  };
				  setTimeout(spin, 500);
				  return function () { finished = true; };
				}

				</script>
				<div class="ia-figure olympic-medals">
					<p class="tools tools-right">
				    <a class="ia-show-options" href="javascript:;"><i class="fa fa-pencil-square-o"></i> options</a>
				    <a class="ia-show-source" href="javascript:;"><i class="fa fa-code"></i> source</a>
				  </p>
				  <p class="tools tools-left">
				    <a class="ia-run" href="javascript:;"><i class="fa fa-refresh"></i> refresh</a>
				  </p>
					<script class="ia-source" type="text/thegamma">
let data =
  olympics.data
    .'group data'.'by Athlete'
      .'sum Gold'.'sum Silver'.'sum Bronze'
      .'concatenate values of Country'.then
    .'sort data'
      .'by Gold descending'.'and by Silver descending'
      .'and by Bronze descending'.then
    .paging
      .take(10)
    .'get the data'

table.create(data)
  .hideColumns(["Gold", "Silver", "Bronze"])
  .addColumn("Medals", fun v ->
    series.range(1, v.Gold).map(fun i -> html.img("img/gold.png")).append(
    series.range(1, v.Silver).map(fun i -> html.img("img/silver.png")).append(
    series.range(1, v.Bronze).map(fun i -> html.img("img/bronze.png")) )) )
 .set("", false)
          </script>
          <div class="ia-options" style="display:none">
						<div class="loading">
							<p>Loading content, please wait...</p>
							<div class="spinner" id="sp0"></div>
							<script>startSpinning(document.getElementById('sp0'));</script>
						</div>
					</div>
					<div class="ia-editor" style="display:none">
						<h3>Edit source</h3>
						<p>The following is the source code behind the visualization. You can change it and hit 'refresh' to run your new version.
							When you type <code>.</code> after a name or a quoted name, you will get hint with possible options to choose from!</p>
						<div id="ed0" class="ia-monaco"></div>
					</div>
          <div class="ia-errors"></div>
					<div id="out0" class="ia-output">
						<div class="loading">
							<p>Loading content, please wait...</p>
							<div class="spinner" id="sp1"></div>
							<script>startSpinning(document.getElementById('sp1'));</script>
						</div>
					</div>
				</div>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
				<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
			</div>
		</div>
  </article>

  <article>
    <div class="container">
      <div class="col-lg-8 new-content">
        <h1><span>Michael Phelps and Medalists of All Time</span></h1>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
			</div>
		</div>
		<div class="container">
      <div class="col-lg-10">
				<div class="ia-figure">
					<p class="tools tools-right">
				    <a class="ia-show-options" href="javascript:;"><i class="fa fa-pencil-square-o"></i> options</a>
				    <a class="ia-show-source" href="javascript:;"><i class="fa fa-code"></i> source</a>
				  </p>
				  <p class="tools tools-left">
				    <a class="ia-run" href="javascript:;"><i class="fa fa-refresh"></i> refresh</a>
				  </p>
					<script class="ia-source" type="text/thegamma">
let data =
  olympics.'by athlete'.'United States'.'PHELPS, Michael'.data
  .'filter columns'
    .'drop Athlete'.'drop Gender'.'drop Gold'.'drop Discipline'
    .'drop Silver'.'drop Bronze'.'drop Sport'.'drop Country'.then
  .'get the data'

table.create(data).set("", false)
					</script>
          <div class="ia-options" style="display:none">
						<div class="loading">
							<p>Loading content, please wait...</p>
							<div class="spinner" id="sp2"></div>
							<script>startSpinning(document.getElementById('sp2'));</script>
						</div>
					</div>
					<div class="ia-editor" style="display:none">
						<h3>Edit source</h3>
						<p>The following is the source code behind the visualization. You can change it and hit 'refresh' to run your new version.
							When you type <code>.</code> after a name or a quoted name, you will get hint with possible options to choose from!</p>
						<div id="ed1" class="ia-monaco"></div>
					</div>
          <div class="ia-errors"></div>
					<div id="out1" class="ia-output ia-scrollable">
						<div class="loading">
							<p>Loading content, please wait...</p>
							<div class="spinner" id="sp3"></div>
							<script>startSpinning(document.getElementById('sp3'));</script>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="container">
      <div class="col-lg-8">
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
      </div>
      <div class="col-lg-2"></div>
      <div class="col-lg-2"></div>
    </div>

    <div class="container">
      <div class="col-lg-8">
        <h1><span>Michael Phelps and Medalists of All Time</span></h1>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
        <div class="col-lg-2"></div>
        <div class="col-lg-2"></div>
      </div>
    </div>
    <div class="container">
      <div class="col-lg-10">
        <div class="ia-figure">
					<p class="tools tools-right">
            <a class="ia-show-options" href="javascript:;"><i class="fa fa-pencil-square-o"></i> options</a>
				    <a class="ia-show-source" href="javascript:;"><i class="fa fa-code"></i> source</a>
				  </p>
				  <p class="tools tools-left">
				    <a class="ia-run" href="javascript:;"><i class="fa fa-refresh"></i> refresh</a>
				  </p>
					<script class="ia-source" type="text/thegamma">
let data =
  olympics.data
    .'group data'.'by Country'.'sum Gold'.then
    .'sort data'.'by Gold descending'.then
    .paging.skip(47).take(10)
    .'get series'.'with key Country'.'and value Gold'

let phelps =
  olympics.'by athlete'.'United States'.'PHELPS, Michael'.data
    .'group data'.'by Athlete'.'sum Gold'.then
    .'get series'.'with key Athlete'.'and value Gold'

chart.columns([data, phelps], ["#F4C300","#3CB3EA"]).legend("",0,"none","")
          </script>
          <div class="ia-options" style="display:none">
						<div class="loading">
							<p>Loading content, please wait...</p>
							<div class="spinner" id="sp4"></div>
							<script>startSpinning(document.getElementById('sp4'));</script>
						</div>
					</div>
					<div class="ia-editor" style="display:none">
						<h3>Edit source</h3>
						<p>The following is the source code behind the visualization. You can change it and hit 'refresh' to run your new version.
							When you type <code>.</code> after a name or a quoted name, you will get hint with possible options to choose from!</p>
						<div id="ed2" class="ia-monaco"></div>
					</div>
          <div class="ia-errors"></div>
					<div id="out2" class="ia-output">
						<div class="loading">
							<p>Loading content, please wait...</p>
							<div class="spinner" id="sp5"></div>
							<script>startSpinning(document.getElementById('sp5'));</script>
						</div>
					</div>
				</div>
      </div>
    </div>
    <div class="container">
      <div class="col-lg-8">
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
        <div class="col-lg-2"></div>
        <div class="col-lg-2"></div>
      </div>
    </div>
    <div class="container">
      <div class="col-lg-8">
        <h1><span>Michael Phelps and Medalists of All Time</span></h1>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
        <div class="col-lg-2"></div>
        <div class="col-lg-2"></div>
      </div>
    </div>
    <div class="container">
      <div class="col-lg-12">
        <div class="ia-figuree">
        <script class="ia-source" type="text/thegamma">
let data =
  olympics.data
    .'group data'.'by Contry'.'sum Gold'.then
    .'sort data'.'by Gold descending'.then
    .paging.skip(47).take(10)
    .'get series'.'with key Country'.'and value Gold'

let phelps =
  olympics.'by athlete'.'United States'.'PHELPS, Michael'.data
    .'group data'.'by Athlete'.'sum Gold'.then
    .'get series'.'with key Athlete'.'and value Gold'

let all = data.append(phelps).sortValues(reverse=true)

chart.column(all)
          </script>
          <div id="ed3" class="ia-editor" style="height:100px"></div>
          <div class="ia-errors"></div>
          <div class="ia-options"></div>
          <div id="out3" class="ia-output"></div>
          <button class="ia-run">Run</button>
        </div>
      </div>
    </div>
    <div class="container">
      <div class="col-lg-8">
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
        <div class="col-lg-2"></div>
        <div class="col-lg-2"></div>
      </div>
    </div>
  </article>



<!-- Third-party standard CDN references -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/numeral.js/1.5.3/numeral.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.6.15/browser-polyfill.min.js"></script>
<script src="https://code.jquery.com/jquery-2.1.4.js" integrity="sha256-siFczlgw4jULnUICcdm9gjQPZkw/YPDqhQ9+nAOScE4="   crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"
	integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>

<!-- Standard local references -->
<script src="lib/chosen.jquery.min.js"></script>
<script type="text/javascript" src="custom/common.js"></script>

<!-- More fancy libraries -->
<script src="//cdnjs.cloudflare.com/ajax/libs/d3/3.5.3/d3.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/topojson/1.6.9/topojson.min.js"></script>
<script src="lib/datamaps.world.min.js"></script>

<!-- Loading Monaco and TheGamma scripts -->
<script src="node_modules/babel-standalone/babel.js"></script>
<script src="node_modules/requirejs/require.js"></script>
<script>
	require.config({
			baseUrl: 'out/build',
			paths: { 'vs': '../../node_modules/monaco-editor/dev/vs' },
			map: { "*": { "monaco": "vs/editor/editor.main" }}
	});
	require(['monaco'], function() {
		require(["bundle"]);
  });
</script>

<script type="text/javascript" src="//www.google.com/jsapi"></script>
<script type="text/javascript">
	var chartsToDraw = [];
	var googleLoaded = false;

	var outputElementID = "chart";
	var blockCallback = function() { console.log("done!!!"); };

	function drawChartOnLoad(f) {
	  if (googleLoaded) f();
	  else chartsToDraw.push(f);
	};

	google.load('visualization', '1', { 'packages': ['corechart'] });
	google.setOnLoadCallback(function () {
	  googleLoaded = true;
	  for (var i = 0; i < chartsToDraw.length; i++) chartsToDraw[i]();
	  chartsToDraw = undefined;
	});

	function drawChart(chart, data, id, callback) {
	  drawChartOnLoad(function() {
	    var ctor = eval("(function(a) { return new google.visualization." + chart.typeName + " (a); })");
	    var ch = ctor(document.getElementById(id));
	    if (chart.options.height == undefined) chart.options.height = 400;
	    ch.draw(data, chart.options);
	    callback();
	  });
	}
</script>


<div id="container" style="position: relative; width: 100%; height: 300px;"></div>

<script>
/*
var bombMap = new Datamap({
    element: document.getElementById('container'),
    scope: 'world',
    geographyConfig: {
        popupOnHover: false,
        highlightOnHover: false
    },
    fills: {
        'USA': '#1f77b4',
        'RUS': '#9467bd',
        'PRK': '#ff7f0e',
        'PRC': '#2ca02c',
        'IND': '#e377c2',
        'GBR': '#8c564b',
        'FRA': '#d62728',
        'PAK': '#7f7f7f',
        defaultFill: '#EDDC4E'
    },
    data: {
        'RUS': {fillKey: 'RUS'},
        'PRK': {fillKey: 'PRK'},
        'PRC': {fillKey: 'PRC'},
        'IND': {fillKey: 'IND'},
        'GBR': {fillKey: 'GBR'},
        'FRA': {fillKey: 'FRA'},
        'PAK': {fillKey: 'PAK'},
        'USA': {fillKey: 'USA'}
    }
});

     function bombs() { return [{
        name: 'Joe 4',
        radius: Math.random() * 100,
        yield: 400,
        country: 'USSR',
        fillKey: 'RUS',
        significance: 'First fusion weapon test by the USSR (not "staged")',
        date: '1953-08-12',
        latitude: 50.07,
        longitude: 78.43
      },{
        name: 'RDS-37',
        radius: Math.random() * 100,
        yield: 1600,
        country: 'USSR',
        fillKey: 'RUS',
        significance: 'First "staged" thermonuclear weapon test by the USSR (deployable)',
        date: '1955-11-22',
        latitude: 50.07,
        longitude: 78.43

      },{
        name: 'Tsar Bomba',
        radius: Math.random() * 100,
        yield: 50000,
        country: 'USSR',
        fillKey: 'RUS',
        significance: 'Largest thermonuclear weapon ever tested—scaled down from its initial 100 Mt design by 50%',
        date: '1961-10-31',
        latitude: 73.482,
        longitude: 54.5854
      }
    ]; }

//draw bubbles for bombs
bombMap.bubbles(bombs(), {
    popupTemplate: function (geo, data) {
            return ['<div class="hoverinfo">' +  data.name,
            '<br/>Payload: ' +  data.yield + ' kilotons',
            '<br/>Country: ' +  data.country + '',
            '<br/>Date: ' +  data.date + '',
            '</div>'].join('');
    }
});


setInterval(function() {
	bombMap.bubbles(bombs(), {
	    popupTemplate: function (geo, data) {
	            return ['<div class="hoverinfo">' +  data.name,
	            '<br/>Payload: ' +  data.yield + ' kilotons',
	            '<br/>Country: ' +  data.country + '',
	            '<br/>Date: ' +  data.date + '',
	            '</div>'].join('');
	    }
	});
}, 5000)
*/
</script>

</body>
</html>
